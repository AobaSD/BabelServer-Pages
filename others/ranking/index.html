<!DOCTYPE HTML>

<html lang="ja">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Babel Server ã¯ã€Minecraft BEã®æ¡æ˜ã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚æ‰€æŒé‡‘ã‚„çµŒé¨“å€¤ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯ã€ã“ã“ã‚ˆã‚Šã”ç¢ºèªä¸‹ã•ã„ï¼">

        <link rel="stylesheet" href="../../src/style.css">

        <title>
            Babel Server ï½œãƒ©ãƒ³ã‚­ãƒ³ã‚°
        </title>

        <link rel="icon" href="/img/favicon.ico" type="x-icon">

        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@graph": [
                    {
                        "@type": "WebSite",
                        "@id": "https://www.babelserver.jp/#website",
                        "name": "Babel Server Official",
                        "url": "https://www.babelserver.jp/"
                    },
                    {
                        "@type": "WebPage",
                        "@id": "https://www.babelserver.jp/others/ranking/",
                        "url": "https://www.babelserver.jp/others/ranking/",
                        "name": "Babel Server Official - ãƒ©ãƒ³ã‚­ãƒ³ã‚°",
                        "description": "Babel Server ã¯ã€Minecraft BEã®æ¡æ˜ã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚æ‰€æŒé‡‘ã‚„çµŒé¨“å€¤ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯ã€ã“ã“ã‚ˆã‚Šã”ç¢ºèªä¸‹ã•ã„ï¼",
                        "inLanguage": "ja",
                        "isPartOf": {
                            "@id": "https://www.babelserver.jp/#website"
                        }
                    }
                ]
            }
        </script>
    </head>

    <body>
        <div class="wrapper">
            <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <header>
                <div class="header-title">
                    <a href="../../" style="color: white; text-decoration: none;">
                        Babel Server
                    </a>
                </div>

                <button class="hamburger-menu" onclick="toggleSideMenu()">â˜°</button>
            </header>

            <!-- ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
            <side-menu>
                <div class="side-text">
                    ãƒ¡ãƒ‹ãƒ¥ãƒ¼
                </div>

                <button class="side-button" onclick="location.href='../../mining-server'">
                    <span class="button-text-ja">
                        æ¡æ˜ã‚µãƒ¼ãƒãƒ¼
                    </span>

                    <span class="button-text-en">
                        Mining Server
                    </span>
                </button>

                <button class="side-button" onclick="location.href='../../how-to-join'">
                    <span class="button-text-ja">
                        å‚åŠ æ–¹æ³•
                    </span>

                    <span class="button-text-en">
                        How to join
                    </span>
                </button>

                <button class="side-button" onclick="location.href='../../moderators'">
                    <span class="button-text-ja">
                        æ¨©é™è€…
                    </span>

                    <span class="button-text-en">
                        Moderators
                    </span>
                </button>

                <button class="side-button" onclick="location.href='../../announcements'">
                    <span class="button-text-ja">
                        ãŠçŸ¥ã‚‰ã›
                    </span>

                    <span class="button-text-en">
                        Announcements
                    </span>
                </button>

                <button class="side-button" onclick="location.href='../../recruitment'">
                    <span class="button-text-ja">
                        æ¡ç”¨æƒ…å ±
                    </span>

                    <span class="button-text-en">
                        Recruitment
                    </span>
                </button>

                <button class="side-button" onclick="location.href='../../contact-us'">
                    <span class="button-text-ja">
                        ãŠå•ã„åˆã‚ã›
                    </span>

                    <span class="button-text-en">
                        Contact Us
                    </span>
                </button>

            </side-menu>

            <div id="overlay"></div>

            <script src="/src/script.js"></script>

            <!-- å†…å®¹éƒ¨åˆ† -->
            <div class="container">
                <div class="pageImg">
                    <div class="imgMainPicture ranking"></div>
                    <!-- ä¸­å¤®ã®ãƒ†ã‚­ã‚¹ãƒˆ -->
                    <div class="imgMainText">
                        <span class="imgMainTextSpan">Babel Server</span><br>
                        <span class="imgMainSubTextSpan">ãƒ©ãƒ³ã‚­ãƒ³ã‚°</span>
                    </div>
                </div>

                <h1>
                    ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°
                </h1>

                <div class="pageWrapper">
                    <div class="rankingTable" id="table-container">
                        <div class="dataTable" id="table-money"></div>
                        <div class="dataTable" id="table-breaks"></div>
                    </div>
                </div>

                <script>
                    // è‰²ã‚³ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã™ã‚‹é–¢æ•°(Â§a-z,0-9)
                    function removeColorCodes(str) {
                        return str.replace(/Â§[a-zA-Z0-9]/g, '').trim();
                    }

                    // ç”Ÿãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãƒ†ãƒ¼ãƒ–ãƒ«ç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã—ã€æŒ‡å®šã—ãŸã‚³ãƒ³ãƒ†ãƒŠã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç”Ÿæˆã—ã¦è¡¨ç¤ºã™ã‚‹é–¢æ•°
                    // tableType å¼•æ•°ã«ã¯ 'money' ã¾ãŸã¯ 'breaks' ã‚’æŒ‡å®šã—ã¦ãã ã•ã„
                    function createTableFromRawData(rawData, container, tableType) {
                        console.log('APIã«æ¥ç¶šã—ã¾ã—ãŸ: æƒ…å ±ã®å–å¾—ãŒå®Œäº†');

                        // HTMLå½¢å¼ã®å ´åˆã«å‚™ãˆã€<br>ã‚¿ã‚°ã‚’æ”¹è¡Œæ–‡å­—ã«ç½®æ›
                        rawData = rawData.replace(/<br\s*\/?>/gi, "\n");

                        // æ”¹è¡Œã‚³ãƒ¼ãƒ‰ï¼ˆCRLF, LF, CRã™ã¹ã¦ã«å¯¾å¿œï¼‰ã§åˆ†å‰²ã—ã€ç©ºè¡Œã‚’é™¤å»ã™ã‚‹
                        const lines = rawData.trim().split(/\r\n|\n|\r/).filter(line => line.trim() !== "");
                        if (lines.length === 0) {
                            console.log("å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æä¾›ã•ã‚ŒãŸæƒ…å ±ã«ã¯å†…å®¹ãŒå«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
                            return;
                        }

                        // 1è¡Œç›®ã¯ãƒ˜ãƒƒãƒ€ãƒ¼ã€‚è‰²ã‚³ãƒ¼ãƒ‰ã‚’é™¤å»ã—ã¦å–å¾—
                        const headerLabel = removeColorCodes(lines[0]);
                        // 2è¡Œç›®ä»¥é™ã‚’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æ‰±ã†
                        const dataRows = lines.slice(1);

                        // ãƒ†ãƒ¼ãƒ–ãƒ«ã®ç”Ÿæˆ
                        const table = document.createElement('table');
                        const thead = document.createElement('thead');
                        const headerRow = document.createElement('tr');

                        const thName = document.createElement('th');
                        thName.textContent = 'åå‰';
                        const thValue = document.createElement('th');
                        thValue.textContent = headerLabel;

                        headerRow.appendChild(thName);
                        headerRow.appendChild(thValue);
                        thead.appendChild(headerRow);
                        table.appendChild(thead);

                        const tbody = document.createElement('tbody');

                        // å„è¡Œã‹ã‚‰åå‰ã¨æ•°å€¤ã‚’æŠ½å‡ºã—ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®è¡Œã‚’ç”Ÿæˆ
                        dataRows.forEach((row, index) => {
                            const cleanRow = removeColorCodes(row);
                            const parts = cleanRow.split(':');
                            if (parts.length < 2) {
                                console.log("å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚¨ãƒ©ãƒ¼ã®è¡Œ:", cleanRow);
                                return;
                            }
                            let name = parts[0].trim();
                            const value = parts[1].trim();
                            let rankClass = '';

                            // ä¸Šä½3ä½ã®å ´åˆã€å¯¾å¿œã™ã‚‹çµµæ–‡å­—ã‚’åå‰ã«è¿½åŠ ã—ã€ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸
                            if (index === 0) {
                                name = 'ğŸ¥‡ ' + name;
                                rankClass = 'first-place';
                            } else if (index === 1) {
                                name = 'ğŸ¥ˆ ' + name;
                                rankClass = 'second-place';
                            } else if (index === 2) {
                                name = 'ğŸ¥‰ ' + name;
                                rankClass = 'third-place';
                            }

                            const tr = document.createElement('tr');
                            if (rankClass !== '') {
                                tr.classList.add(rankClass);
                            }

                            const tdName = document.createElement('td');
                            tdName.textContent = name;
                            const tdValue = document.createElement('td');
                            tdValue.textContent = value;

                            // money ã®è¡¨ã¯å³å´ã‚’é‡‘è‰²ã€breaks ã®è¡¨ã¯å³å´ã‚’é’è‰²ã«ã™ã‚‹
                            if (tableType === 'money') {
                                tdValue.classList.add('gold-text');
                            } else if (tableType === 'breaks') {
                                tdValue.classList.add('blue-text');
                            }

                            tr.appendChild(tdName);
                            tr.appendChild(tdValue);
                            tbody.appendChild(tr);
                        });

                        table.appendChild(tbody);
                        container.appendChild(table);
                    }

                    // æŒ‡å®šã® LeaderboardType ã‚’ä½¿ã£ã¦ API ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æŒ‡å®šã®ã‚³ãƒ³ãƒ†ãƒŠã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã™ã‚‹é–¢æ•°
                    function fetchAndDisplayTable(leaderboardType, containerId) {
                        fetch('https://api.ma27inranma.com/bs-seichi/api/v0/leaderboard', {
                            headers: {
                                'LeaderboardType': leaderboardType
                            }
                        })
                            .then(response => {
                                if (!response.ok) {
                                    throw new Error(`APIã‹ã‚‰å–å¾—å‡ºæ¥ã¾ã›ã‚“ã§ã—ãŸ (ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${response.status})`);
                                }
                                return response.text();
                            })
                            .then(rawData => {
                                const container = document.getElementById(containerId);
                                createTableFromRawData(rawData, container, leaderboardType);
                                console.log('å‡¦ç†ãŒå®Œäº†ã—ã¾ã—ãŸ: ãƒ†ãƒ¼ãƒ–ãƒ«ã®ç”Ÿæˆã¨ãƒ‡ãƒ¼ã‚¿å‡¦ç†');
                            })
                            .catch(error => {
                                console.log('APIã‹ã‚‰å–å¾—å‡ºæ¥ã¾ã›ã‚“ã§ã—ãŸã€‚è©³ç´°: ' + leaderboardType + ':', error);
                            });
                    }

                    // DOMèª­ã¿è¾¼ã¿å®Œäº†å¾Œã«ä¸¡æ–¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å–å¾—ã—ã¦è¡¨ç¤º
                    document.addEventListener('DOMContentLoaded', function() {
                        fetchAndDisplayTable('money', 'table-money');
                        fetchAndDisplayTable('breaks', 'table-breaks');
                    });
                </script>
            </div>

            <footer>
                <div class="footer-content">
                    <!-- å·¦ã‚«ãƒ©ãƒ ï¼šæ’å‡ºç¢ºç‡ -->
                    <div class="footer-column">
                        <div class="footer-title">
                            æ’å‡ºç¢ºç‡
                        </div>

                        <ul>
                            <li>
                                <a href="../../probability/cave">
                                    æ´çªŸ
                                </a>
                            </li>

                            <li>
                                <a href="../../probability/nether">
                                    ãƒã‚¶ãƒ¼
                                </a>
                            </li>

                            <li>
                                <a href="../../probability/end">
                                    ã‚¨ãƒ³ãƒ‰
                                </a>
                            </li>

                            <li>
                                <a href="../../probability/ocean">
                                    æµ·
                                </a>
                            </li>

                            <li>
                                <a href="../../probability/temple">
                                    æµ·åº•ç¥æ®¿
                                </a>
                            </li>

                            <li>
                                <a href="../../probability/demise">
                                    çµ‚ç„‰
                                </a>
                            </li>

                            <li>
                                <a href="../../probability/gold">
                                    é»„é‡‘
                                </a>
                            </li>

                            <li>
                                <a href="../../probability/heaven">
                                    å¤©ç•Œ
                                </a>
                            </li>
                        </ul>
                    </div>

                    <!-- ä¸­å¤®ã‚«ãƒ©ãƒ ï¼šBabel Server -->
                    <div class="footer-column">
                        <div class="footer-title">
                            Babel Server
                        </div>

                        <ul>
                            <li>
                                <a href="../../mining-server">
                                    æ¡æ˜ã‚µãƒ¼ãƒãƒ¼
                                </a>
                            </li>

                            <li>
                                <a href="../../how-to-join">
                                    å‚åŠ æ–¹æ³•
                                </a>
                            </li>

                            <li>
                                <a href="../../moderators">
                                    æ¨©é™è€…
                                </a>
                            </li>

                            <li>
                                <a href="../../announcements">
                                    ãŠçŸ¥ã‚‰ã›
                                </a>
                            </li>

                            <li>
                                <a href="../../recruitment">
                                    æ¡ç”¨æƒ…å ±
                                </a>
                            </li>

                            <li>
                                <a href="../../contact-us">
                                    ãŠå•ã„åˆã‚ã›
                                </a>
                            </li>
                        </ul>
                    </div>

                    <!-- å³ã‚«ãƒ©ãƒ ï¼šãã®ä»– -->
                    <div class="footer-column">
                        <div class="footer-title">
                            ãã®ä»–
                        </div>

                        <ul>
                            <li>
                                <a href="../../others/ranking">
                                    ãƒ©ãƒ³ã‚­ãƒ³ã‚°
                                </a>
                            </li>

                            <li>
                                <a href="../../others/room">
                                    å€‹äººéƒ¨å±‹
                                </a>
                            </li>

                            <li>
                                <a href="../../others/about">
                                    ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- ãƒ•ãƒƒã‚¿ãƒ¼æœ€ä¸‹éƒ¨ -->
                <div class="footer-bottom">
                    Copyright&copy; 2025 aoba0713 All Rights Reserved.
                </div>
            </footer>
        </div>
    </body>

</html>